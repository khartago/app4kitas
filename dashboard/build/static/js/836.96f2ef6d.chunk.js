"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[836],{5974:(t,e,a)=>{a.d(e,{$:()=>s,$r:()=>y,Bx:()=>u,EZ:()=>w,F4:()=>x,Iw:()=>p,N6:()=>h,RN:()=>j,UR:()=>m,Zr:()=>f,dE:()=>c,kC:()=>o,oS:()=>l,pl:()=>d,qU:()=>g,st:()=>r});var n=a(9722);const i="/api",c=async()=>(await n.A.get("".concat(i,"/admin/stats"),{withCredentials:!0})).data,d=async()=>(await n.A.get("".concat(i,"/groups"),{withCredentials:!0})).data,s=async t=>(await n.A.post("".concat(i,"/groups"),t,{withCredentials:!0})).data,o=async(t,e)=>(await n.A.put("".concat(i,"/groups/").concat(t,"/educators"),{educatorIds:e},{withCredentials:!0})).data,r=async()=>(await n.A.get("".concat(i,"/children"),{withCredentials:!0})).data,l=async t=>(await n.A.post("".concat(i,"/children"),t,{withCredentials:!0})).data,h=async(t,e)=>(await n.A.put("".concat(i,"/children/").concat(t),e,{withCredentials:!0})).data,p=async(t,e)=>{const a=new FormData;a.append("photo",e);return(await n.A.put("".concat(i,"/children/").concat(t,"/photo"),a,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data},u=async()=>(await n.A.get("".concat(i,"/educators"),{withCredentials:!0})).data,x=async()=>(await n.A.get("".concat(i,"/checkin/stats"),{withCredentials:!0})).data,w=async t=>(await n.A.delete("".concat(i,"/children/").concat(t),{withCredentials:!0})).data,g=t=>{window.open("".concat(i,"/children/export?format=").concat(t),"_blank")},y=async t=>(await n.A.post("".concat(i,"/educators"),t,{withCredentials:!0})).data,m=async(t,e)=>(await n.A.put("".concat(i,"/educators/").concat(t),e,{withCredentials:!0})).data,f=async t=>(await n.A.delete("".concat(i,"/educators/").concat(t),{withCredentials:!0})).data,j=t=>{window.open("".concat(i,"/educators/export?format=").concat(t),"_blank")}},9455:(t,e,a)=>{a.r(e),a.d(e,{default:()=>j});var n,i,c,d,s,o=a(7528),r=a(5043),l=a(5464),h=a(4255),p=a(8845),u=a(5974),x=a(579);const w=l.Ay.div(n||(n=(0,o.A)(["\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 32px 0;\n"]))),g=l.Ay.div(i||(i=(0,o.A)(["\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n  margin-bottom: 32px;\n"]))),y=l.Ay.div(c||(c=(0,o.A)(["\n  display: flex;\n  gap: 12px;\n  margin-bottom: 16px;\n"]))),m=l.Ay.select(d||(d=(0,o.A)(["\n  padding: 8px 12px;\n  border-radius: 8px;\n  border: 1px solid #ccc;\n  font-size: 16px;\n"]))),f=l.Ay.div(s||(s=(0,o.A)(["\n  text-align: center;\n  margin: 48px 0;\n"]))),j=()=>{const[t,e]=(0,r.useState)([]),[a,n]=(0,r.useState)(""),[i,c]=(0,r.useState)("educator"),[d,s]=(0,r.useState)(""),[o,l]=(0,r.useState)([]),[j,A]=(0,r.useState)([]),[v,C]=(0,r.useState)(!1),[b,S]=(0,r.useState)("");(0,r.useEffect)(()=>{(0,u.Bx)().then(t=>l(t.educators||t)),(0,u.pl)().then(t=>A(t.groups||t))},[]),(0,r.useEffect)(()=>{d&&(C(!0),fetch("/api/notifications/".concat(d),{credentials:"include"}).then(t=>t.json()).then(t=>e(t.notifications||t)).catch(()=>e([])).finally(()=>C(!1)))},[d]);return(0,x.jsxs)(w,{children:[(0,x.jsx)(p.$j,{children:"Benachrichtigungen"}),(0,x.jsxs)(y,{children:[(0,x.jsxs)(m,{value:i,onChange:t=>{c(t.target.value),s("")},children:[(0,x.jsx)("option",{value:"educator",children:"Erzieher"}),(0,x.jsx)("option",{value:"group",children:"Gruppe"})]}),(0,x.jsxs)(m,{value:d,onChange:t=>s(t.target.value),children:[(0,x.jsx)("option",{value:"",children:"Empf\xe4nger w\xe4hlen..."}),"educator"===i&&o.map(t=>(0,x.jsx)("option",{value:t.id,children:t.name},t.id)),"group"===i&&j.map(t=>(0,x.jsx)("option",{value:t.id,children:t.name},t.id))]}),(0,x.jsx)(p.pd,{value:a,onChange:t=>n(t.target.value),placeholder:"Nachricht eingeben..."}),(0,x.jsx)(p.$n,{onClick:async()=>{if(a.trim()&&d){C(!0),S("");try{const i=await fetch("/api/notifications/send",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({userId:d,title:"Mitteilung",body:a})});if(!i.ok)throw new Error("Fehler beim Senden");n("");const c=await i.json();e([c,...t])}catch(i){S("Fehler beim Senden der Benachrichtigung.")}C(!1)}},disabled:v||!a.trim()||!d,children:"Senden"})]}),b&&(0,x.jsx)("div",{style:{color:"red",marginBottom:12},children:b}),(0,x.jsx)(g,{children:v?(0,x.jsx)("div",{children:"L\xe4dt..."}):0===t.length?(0,x.jsxs)(f,{children:[(0,x.jsx)(h.A,{size:80,mood:"help"}),(0,x.jsx)("div",{children:"Keine Benachrichtigungen gefunden."})]}):t.map(t=>(0,x.jsxs)(p.Zp,{children:[(0,x.jsx)("div",{style:{fontWeight:600},children:t.title||"Mitteilung"}),(0,x.jsx)("div",{children:t.body||t.text}),(0,x.jsx)("div",{style:{color:"#757575",fontSize:14},children:t.date||t.createdAt})]},t.id))})]})}}}]);
//# sourceMappingURL=836.96f2ef6d.chunk.js.map