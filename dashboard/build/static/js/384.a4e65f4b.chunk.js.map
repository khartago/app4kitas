{"version":3,"file":"static/js/384.a4e65f4b.chunk.js","mappings":"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","sources":["pages/admin/Monatsbericht.tsx","services/adminApi.ts","services/reportApi.ts"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport styled from 'styled-components';\r\nimport MascotBear from '../../components/ui/MascotBear';\r\nimport { Headline, Button } from '../../components/ui/AdminDashboardUI';\r\nimport { fetchMonthlyReport, exportMonthlyReport } from '../../services/reportApi';\r\nimport { fetchGroups } from '../../services/adminApi';\r\n\r\nconst Container = styled.div`\r\n  max-width: 900px;\r\n  margin: 0 auto;\r\n  padding: 32px 0;\r\n`;\r\nconst ExportRow = styled.div`\r\n  display: flex;\r\n  gap: 12px;\r\n  margin-bottom: 16px;\r\n`;\r\nconst EmptyState = styled.div`\r\n  text-align: center;\r\n  margin: 48px 0;\r\n`;\r\nconst FilterRow = styled.div`\r\n  display: flex;\r\n  gap: 16px;\r\n  margin-bottom: 16px;\r\n`;\r\nconst Select = styled.select`\r\n  padding: 8px 12px;\r\n  border-radius: 8px;\r\n  border: 1px solid #ccc;\r\n  font-size: 16px;\r\n`;\r\n\r\nconst Monatsbericht: React.FC = () => {\r\n  const [month, setMonth] = useState(() => new Date().toISOString().slice(0, 7));\r\n  const [groupId, setGroupId] = useState('');\r\n  const [groups, setGroups] = useState<any[]>([]);\r\n  const [report, setReport] = useState<any[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    fetchGroups().then(res => setGroups(res.groups || res));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setLoading(true);\r\n    setError(null);\r\n    fetchMonthlyReport(month, groupId)\r\n      .then(data => setReport(data.report))\r\n      .catch(() => setError('Fehler beim Laden des Berichts'))\r\n      .finally(() => setLoading(false));\r\n  }, [month, groupId]);\r\n\r\n  return (\r\n    <Container>\r\n      <Headline>Monatsbericht</Headline>\r\n      <ExportRow>\r\n        <Button onClick={() => exportMonthlyReport(month, groupId)}>Als CSV exportieren</Button>\r\n      </ExportRow>\r\n      <FilterRow>\r\n        <input type=\"month\" value={month} onChange={e => setMonth(e.target.value)} />\r\n        <Select value={groupId} onChange={e => setGroupId(e.target.value)}>\r\n          <option value=\"\">Alle Gruppen</option>\r\n          {groups.map(g => (\r\n            <option key={g.id} value={g.id}>{g.name}</option>\r\n          ))}\r\n        </Select>\r\n      </FilterRow>\r\n      {loading ? (\r\n        <div>Lädt...</div>\r\n      ) : error ? (\r\n        <div style={{ color: 'red' }}>{error}</div>\r\n      ) : report.length === 0 ? (\r\n        <EmptyState>\r\n          <MascotBear size={80} mood=\"help\" />\r\n          <div>Keine Berichtsdaten gefunden.</div>\r\n        </EmptyState>\r\n      ) : (\r\n        <table style={{ width: '100%', marginTop: 24 }}>\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Anwesenheitstage</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {report.map(row => (\r\n              <tr key={row.childId}>\r\n                <td>{row.name}</td>\r\n                <td>{row.checkInDays}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Monatsbericht; ","import axios from 'axios';\n\nconst API_URL = '/api';\n\n// Holt Admin-Statistiken (Platzhalter, Backend-Route ggf. anpassen)\nexport const getAdminStats = async () => {\n  const res = await axios.get(`${API_URL}/admin/stats`, { withCredentials: true });\n  return res.data;\n};\n\n// Holt alle Gruppen\nexport const fetchGroups = async () => {\n  const res = await axios.get(`${API_URL}/groups`, { withCredentials: true });\n  return res.data;\n};\n\n// Fügt eine neue Gruppe hinzu\nexport const addGroup = async (data: any) => {\n  const res = await axios.post(`${API_URL}/groups`, data, { withCredentials: true });\n  return res.data;\n};\n\n// Weist Erzieher einer Gruppe zu (Platzhalter, Backend-Route ggf. anpassen)\nexport const assignEducators = async (groupId: string, educatorIds: string[]) => {\n  const res = await axios.put(`${API_URL}/groups/${groupId}/educators`, { educatorIds }, { withCredentials: true });\n  return res.data;\n};\n\n// Holt alle Kinder\nexport const fetchChildren = async () => {\n  const res = await axios.get(`${API_URL}/children`, { withCredentials: true });\n  return res.data;\n};\n\n// Fügt ein neues Kind hinzu\nexport const addChild = async (data: any) => {\n  const res = await axios.post(`${API_URL}/children`, data, { withCredentials: true });\n  return res.data;\n};\n\n// Bearbeitet ein Kind (Platzhalter, Backend-Route ggf. anpassen)\nexport const editChild = async (childId: string, data: any) => {\n  const res = await axios.put(`${API_URL}/children/${childId}`, data, { withCredentials: true });\n  return res.data;\n};\n\n// Bereits vorhandene Funktionen\nexport const getKinder = fetchChildren;\nexport const getGruppen = fetchGroups;\nexport const createKind = addChild;\nexport const createGruppe = addGroup;\n\n// Lädt ein Kinderfoto hoch\nexport const uploadChildPhoto = async (childId: string, file: File) => {\n  const formData = new FormData();\n  formData.append('photo', file);\n  const res = await axios.put(`${API_URL}/children/${childId}/photo`, formData, {\n    withCredentials: true,\n    headers: { 'Content-Type': 'multipart/form-data' }\n  });\n  return res.data;\n};\n\n// Holt alle Erzieher\nexport const fetchEducators = async () => {\n  const res = await axios.get(`${API_URL}/educators`, { withCredentials: true });\n  return res.data;\n};\n\n// Holt Check-in-Statistiken (Platzhalter, Backend-Route ggf. anpassen)\nexport const fetchCheckinStats = async () => {\n  const res = await axios.get(`${API_URL}/checkin/stats`, { withCredentials: true });\n  return res.data;\n};\n\n// --- GROUPS ---\n// Edit a group\nexport const editGroup = async (groupId: string, data: any) => {\n  const res = await axios.put(`${API_URL}/groups/${groupId}`, data, { withCredentials: true });\n  return res.data;\n};\n// Delete a group\nexport const deleteGroup = async (groupId: string) => {\n  const res = await axios.delete(`${API_URL}/groups/${groupId}`, { withCredentials: true });\n  return res.data;\n};\n// Export groups (CSV/PDF)\nexport const exportGroups = (format: 'csv' | 'pdf') => {\n  window.open(`${API_URL}/groups/export?format=${format}`, '_blank');\n};\n\n// --- CHILDREN ---\n// Edit a child (already present as editChild)\n// Delete a child\nexport const deleteChild = async (childId: string) => {\n  const res = await axios.delete(`${API_URL}/children/${childId}`, { withCredentials: true });\n  return res.data;\n};\n// Export children (CSV/PDF)\nexport const exportChildren = (format: 'csv' | 'pdf') => {\n  window.open(`${API_URL}/children/export?format=${format}`, '_blank');\n};\n\n// --- EDUCATORS (STAFF) ---\n// Add educator\nexport const addEducator = async (data: any) => {\n  const res = await axios.post(`${API_URL}/educators`, data, { withCredentials: true });\n  return res.data;\n};\n// Edit educator\nexport const editEducator = async (educatorId: string, data: any) => {\n  const res = await axios.put(`${API_URL}/educators/${educatorId}`, data, { withCredentials: true });\n  return res.data;\n};\n// Delete educator\nexport const deleteEducator = async (educatorId: string) => {\n  const res = await axios.delete(`${API_URL}/educators/${educatorId}`, { withCredentials: true });\n  return res.data;\n};\n// Export educators (CSV/PDF)\nexport const exportEducators = (format: 'csv' | 'pdf') => {\n  window.open(`${API_URL}/educators/export?format=${format}`, '_blank');\n};\n\n// Weitere Admin-APIs können hier ergänzt werden ","export async function fetchDailyReport(date: string, groupId?: string) {\r\n  const params = new URLSearchParams({ date });\r\n  if (groupId) params.append('groupId', groupId);\r\n  const res = await fetch(`/api/reports/daily?${params.toString()}`);\r\n  if (!res.ok) throw new Error('Fehler beim Laden des Tagesberichts');\r\n  return res.json();\r\n}\r\n\r\nexport function exportDailyReport(date: string, groupId?: string) {\r\n  const params = new URLSearchParams({ date, format: 'csv' });\r\n  if (groupId) params.append('groupId', groupId);\r\n  window.open(`/api/reports/daily/export?${params.toString()}`);\r\n}\r\n\r\nexport async function fetchMonthlyReport(month: string, groupId?: string) {\r\n  const params = new URLSearchParams({ month });\r\n  if (groupId) params.append('groupId', groupId);\r\n  const res = await fetch(`/api/reports/monthly?${params.toString()}`);\r\n  if (!res.ok) throw new Error('Fehler beim Laden des Monatsberichts');\r\n  return res.json();\r\n}\r\n\r\nexport function exportMonthlyReport(month: string, groupId?: string) {\r\n  const params = new URLSearchParams({ month, format: 'csv' });\r\n  if (groupId) params.append('groupId', groupId);\r\n  window.open(`/api/reports/monthly/export?${params.toString()}`);\r\n}\r\n\r\nexport async function fetchLatePickupsReport(date: string, groupId?: string) {\r\n  const params = new URLSearchParams({ date });\r\n  if (groupId) params.append('groupId', groupId);\r\n  const res = await fetch(`/api/reports/late-pickups?${params.toString()}`);\r\n  if (!res.ok) throw new Error('Fehler beim Laden des Verspätungsberichts');\r\n  return res.json();\r\n}\r\n\r\nexport function exportLatePickupsReport(date: string, groupId?: string) {\r\n  const params = new URLSearchParams({ date });\r\n  if (groupId) params.append('groupId', groupId);\r\n  window.open(`/api/reports/late-pickups/export?${params.toString()}`);\r\n} "],"names":["Container","styled","div","_templateObject","_taggedTemplateLiteral","ExportRow","_templateObject2","EmptyState","_templateObject3","FilterRow","_templateObject4","Select","select","_templateObject5","Monatsbericht","month","setMonth","useState","Date","toISOString","slice","groupId","setGroupId","groups","setGroups","report","setReport","loading","setLoading","error","setError","useEffect","fetchGroups","then","res","fetchMonthlyReport","data","catch","finally","_jsxs","children","_jsx","Headline","Button","onClick","exportMonthlyReport","type","value","onChange","e","target","map","g","id","name","style","color","length","MascotBear","size","mood","width","marginTop","row","checkInDays","childId","API_URL","getAdminStats","async","axios","get","concat","withCredentials","addGroup","post","assignEducators","educatorIds","put","fetchChildren","addChild","editChild","uploadChildPhoto","file","formData","FormData","append","headers","fetchEducators","fetchCheckinStats","deleteChild","delete","exportChildren","format","window","open","addEducator","editEducator","educatorId","deleteEducator","exportEducators","fetchDailyReport","date","params","URLSearchParams","fetch","toString","ok","Error","json","exportDailyReport"],"sourceRoot":""}