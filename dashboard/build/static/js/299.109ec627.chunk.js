"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[299],{1299:(e,t,n)=>{n.r(t),n.d(t,{default:()=>F});var a,r,s,l,o,i,c,d,h,p,u,m=n(9379),x=n(7528),y=n(5043),g=n(5464),f=n(1146),w=n(4255),j=n(5974),A=n(8845),b=n(579);const C=g.Ay.table(a||(a=(0,x.A)(["\n  width: 100%;\n  border-collapse: collapse;\n  background: ",";\n"])),e=>{let{theme:t}=e;return t.colors.surface}),v=g.Ay.th(r||(r=(0,x.A)(["\n  padding: 12px;\n  background: ",";\n  color: #fff;\n  text-align: left;\n  font-family: ",";\n  font-size: ",";\n  font-weight: ",";\n"])),e=>{let{theme:t}=e;return t.colors.primary},e=>{let{theme:t}=e;return t.typography.fontFamily},e=>{let{theme:t}=e;return t.typography.body1.fontSize},e=>{let{theme:t}=e;return t.typography.body1.fontWeight}),S=g.Ay.td(s||(s=(0,x.A)(["\n  padding: 12px;\n  border-bottom: 1px solid ",";\n  font-family: ",";\n  font-size: ",";\n  color: ",";\n"])),e=>{let{theme:t}=e;return t.colors.border},e=>{let{theme:t}=e;return t.typography.fontFamily},e=>{let{theme:t}=e;return t.typography.body2.fontSize},e=>{let{theme:t}=e;return t.colors.textPrimary}),k=g.Ay.tr(l||(l=(0,x.A)([""]))),z=g.Ay.td(o||(o=(0,x.A)(["\n  display: flex;\n  gap: 8px;\n"]))),B=g.Ay.div(i||(i=(0,x.A)(["\n  display: flex;\n  justify-content: flex-end;\n  gap: 8px;\n  margin-top: 16px;\n"]))),P=g.Ay.input(c||(c=(0,x.A)(["\n  padding: ",";\n  border-radius: ",";\n  border: 1px solid ",";\n  margin-bottom: 16px;\n  width: 250px;\n  font-family: ",";\n  font-size: ",";\n  color: ",";\n  background: ",";\n  &:focus {\n    outline: none;\n    border-color: ",";\n  }\n"])),e=>{let{theme:t}=e;return t.components.input.padding},e=>{let{theme:t}=e;return t.components.input.borderRadius},e=>{let{theme:t}=e;return t.colors.border},e=>{let{theme:t}=e;return t.typography.fontFamily},e=>{let{theme:t}=e;return t.typography.body2.fontSize},e=>{let{theme:t}=e;return t.colors.textPrimary},e=>{let{theme:t}=e;return t.colors.surface},e=>{let{theme:t}=e;return t.components.input.focusedBorderColor}),U=(0,g.Ay)(A.$n)(d||(d=(0,x.A)(["\n  margin-bottom: 16px;\n"]))),N=(0,g.Ay)(A.$n)(h||(h=(0,x.A)(["\n  background: ",";\n  color: ",";\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 6px 14px;\n  font-family: ",";\n  font-size: ",";\n  font-weight: 500;\n  cursor: pointer;\n  transition: background 0.2s, color 0.2s;\n  &:hover {\n    background: ",";\n    color: #fff;\n  }\n"])),e=>{let{theme:t,active:n}=e;return n?t.colors.primary:t.colors.surface},e=>{let{theme:t,active:n}=e;return n?"#fff":t.colors.textPrimary},e=>{let{theme:t}=e;return t.colors.border},e=>{let{theme:t}=e;return t.typography.fontFamily},e=>{let{theme:t}=e;return t.typography.body2.fontSize},e=>{let{theme:t}=e;return t.colors.primaryDark}),$=g.Ay.div(p||(p=(0,x.A)(["\n  display: flex;\n  gap: 12px;\n  margin-bottom: 16px;\n"]))),E=g.Ay.div(u||(u=(0,x.A)(["\n  text-align: center;\n  margin: 48px 0;\n"]))),F=()=>{const[e,t]=(0,y.useState)([]),[n,a]=(0,y.useState)(""),[r,s]=(0,y.useState)(1),[l,o]=(0,y.useState)(0),[i,c]=(0,y.useState)(!1),[d,h]=(0,y.useState)(!1),[p,u]=(0,y.useState)(null),[x,g]=(0,y.useState)(null),[F,M]=(0,y.useState)({name:"",email:"",password:""}),[R,q]=(0,y.useState)({name:"",email:"",password:""}),[J,D]=(0,y.useState)(""),[L,Z]=(0,y.useState)("");(0,y.useEffect)(()=>{(async()=>{c(!0);try{new URLSearchParams({search:n,page:String(r),size:String(10)});const e=await(0,j.Bx)();t(e.educators||e),o(e.total||e.length||0)}catch(e){t([]),o(0)}finally{c(!1)}})()},[n,r]);const I=Math.ceil(l/10);return(0,b.jsxs)("div",{children:[(0,b.jsx)(A.$j,{children:"Personal\xfcbersicht"}),(0,b.jsxs)($,{children:[(0,b.jsx)(A.$n,{onClick:()=>(0,j.RN)("csv"),children:"Als CSV exportieren"}),(0,b.jsx)(A.$n,{onClick:()=>(0,j.RN)("pdf"),children:"Als PDF exportieren"}),(0,b.jsx)(U,{onClick:()=>h(!0),children:"+ Personal hinzuf\xfcgen"})]}),(0,b.jsx)(P,{placeholder:"Suche nach Name oder E-Mail...",value:n,onChange:e=>{a(e.target.value),s(1)}}),(0,b.jsxs)(C,{children:[(0,b.jsx)("thead",{children:(0,b.jsxs)(k,{children:[(0,b.jsx)(v,{children:"Name"}),(0,b.jsx)(v,{children:"E-Mail"}),(0,b.jsx)(v,{children:"Avatar"}),(0,b.jsx)(v,{children:"Aktionen"})]})}),(0,b.jsx)("tbody",{children:i?(0,b.jsx)(k,{children:(0,b.jsx)(S,{colSpan:4,children:"L\xe4dt..."})}):0===e.length?(0,b.jsx)(k,{children:(0,b.jsx)(S,{colSpan:4,children:(0,b.jsxs)(E,{children:[(0,b.jsx)(w.A,{size:80,mood:"help"}),(0,b.jsx)("div",{children:"Kein Personal gefunden."})]})})}):e.map(e=>(0,b.jsxs)(k,{children:[(0,b.jsx)(S,{children:e.name}),(0,b.jsx)(S,{children:e.email}),(0,b.jsx)(S,{children:e.avatarUrl?(0,b.jsx)(A.eu,{src:e.avatarUrl,alt:e.name}):"\u2014"}),(0,b.jsxs)(z,{children:[(0,b.jsx)(A.$n,{onClick:()=>{u(e.id),q({name:e.name,email:e.email,password:""})},children:"Bearbeiten"}),(0,b.jsx)(A.$n,{onClick:()=>g(e.id),style:{background:"#e53935"},children:"L\xf6schen"})]})]},e.id))})]}),(0,b.jsx)(B,{children:Array.from({length:I},(e,t)=>(0,b.jsx)(N,{active:t+1===r,onClick:()=>s(t+1),children:t+1},t))}),d&&(0,b.jsxs)(f.Ay,{open:d,onClose:()=>h(!1),title:"Personal anlegen",children:[J&&(0,b.jsx)(f.yn,{children:J}),(0,b.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),D(""),F.name&&F.email&&F.password)try{await(0,j.$r)(F),h(!1),M({name:"",email:"",password:""}),s(1),a("");const e=await(0,j.Bx)();t(e.educators||e),o(e.total||e.length||0)}catch(n){D((null===n||void 0===n?void 0:n.message)||"Fehler beim Anlegen.")}else D("Name, E-Mail und Passwort sind erforderlich.")},children:[(0,b.jsxs)(f.zB,{children:[(0,b.jsx)(f.JU,{children:"Name"}),(0,b.jsx)(f.pd,{type:"text",value:F.name,onChange:e=>M(t=>(0,m.A)((0,m.A)({},t),{},{name:e.target.value})),required:!0})]}),(0,b.jsxs)(f.zB,{children:[(0,b.jsx)(f.JU,{children:"E-Mail"}),(0,b.jsx)(f.pd,{type:"email",value:F.email,onChange:e=>M(t=>(0,m.A)((0,m.A)({},t),{},{email:e.target.value})),required:!0})]}),(0,b.jsxs)(f.zB,{children:[(0,b.jsx)(f.JU,{children:"Passwort"}),(0,b.jsx)(f.pd,{type:"password",value:F.password,onChange:e=>M(t=>(0,m.A)((0,m.A)({},t),{},{password:e.target.value})),required:!0})]}),(0,b.jsx)(f.yl,{type:"submit",children:"Anlegen"})]})]}),p&&(0,b.jsxs)(f.Ay,{open:!!p,onClose:()=>u(null),title:"Personal bearbeiten",children:[L&&(0,b.jsx)(f.yn,{children:L}),(0,b.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),Z(""),R.name&&R.email)try{if(p){await(0,j.UR)(p,R),u(null),q({name:"",email:"",password:""});const e=await(0,j.Bx)();t(e.educators||e),o(e.total||e.length||0)}}catch(n){Z((null===n||void 0===n?void 0:n.message)||"Fehler beim Bearbeiten.")}else Z("Name und E-Mail sind erforderlich.")},children:[(0,b.jsxs)(f.zB,{children:[(0,b.jsx)(f.JU,{children:"Name"}),(0,b.jsx)(f.pd,{type:"text",value:R.name,onChange:e=>q(t=>(0,m.A)((0,m.A)({},t),{},{name:e.target.value})),required:!0})]}),(0,b.jsxs)(f.zB,{children:[(0,b.jsx)(f.JU,{children:"E-Mail"}),(0,b.jsx)(f.pd,{type:"email",value:R.email,onChange:e=>q(t=>(0,m.A)((0,m.A)({},t),{},{email:e.target.value})),required:!0})]}),(0,b.jsxs)(f.zB,{children:[(0,b.jsx)(f.JU,{children:"Passwort (leer lassen zum Beibehalten)"}),(0,b.jsx)(f.pd,{type:"password",value:R.password,onChange:e=>q(t=>(0,m.A)((0,m.A)({},t),{},{password:e.target.value}))})]}),(0,b.jsx)(f.yl,{type:"submit",children:"Speichern"})]})]}),x&&(0,b.jsxs)(f.Ay,{open:!!x,onClose:()=>g(null),title:"Personal l\xf6schen",children:[(0,b.jsx)("p",{children:"M\xf6chtest du dieses Personal wirklich l\xf6schen?"}),(0,b.jsx)(f.yl,{style:{background:"#e53935"},onClick:async()=>{if(x){c(!0);try{await(0,j.Zr)(x),g(null);const e=await(0,j.Bx)();t(e.educators||e),o(e.total||e.length||0)}catch(e){}c(!1)}},children:"L\xf6schen"})]})]})}},5974:(e,t,n)=>{n.d(t,{$:()=>o,$r:()=>g,Bx:()=>u,EZ:()=>x,F4:()=>m,Iw:()=>p,N6:()=>h,RN:()=>j,UR:()=>f,Zr:()=>w,dE:()=>s,kC:()=>i,oS:()=>d,pl:()=>l,qU:()=>y,st:()=>c});var a=n(9722);const r="/api",s=async()=>(await a.A.get("".concat(r,"/admin/stats"),{withCredentials:!0})).data,l=async()=>(await a.A.get("".concat(r,"/groups"),{withCredentials:!0})).data,o=async e=>(await a.A.post("".concat(r,"/groups"),e,{withCredentials:!0})).data,i=async(e,t)=>(await a.A.put("".concat(r,"/groups/").concat(e,"/educators"),{educatorIds:t},{withCredentials:!0})).data,c=async()=>(await a.A.get("".concat(r,"/children"),{withCredentials:!0})).data,d=async e=>(await a.A.post("".concat(r,"/children"),e,{withCredentials:!0})).data,h=async(e,t)=>(await a.A.put("".concat(r,"/children/").concat(e),t,{withCredentials:!0})).data,p=async(e,t)=>{const n=new FormData;n.append("photo",t);return(await a.A.put("".concat(r,"/children/").concat(e,"/photo"),n,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data},u=async()=>(await a.A.get("".concat(r,"/educators"),{withCredentials:!0})).data,m=async()=>(await a.A.get("".concat(r,"/checkin/stats"),{withCredentials:!0})).data,x=async e=>(await a.A.delete("".concat(r,"/children/").concat(e),{withCredentials:!0})).data,y=e=>{window.open("".concat(r,"/children/export?format=").concat(e),"_blank")},g=async e=>(await a.A.post("".concat(r,"/educators"),e,{withCredentials:!0})).data,f=async(e,t)=>(await a.A.put("".concat(r,"/educators/").concat(e),t,{withCredentials:!0})).data,w=async e=>(await a.A.delete("".concat(r,"/educators/").concat(e),{withCredentials:!0})).data,j=e=>{window.open("".concat(r,"/educators/export?format=").concat(e),"_blank")}}}]);
//# sourceMappingURL=299.109ec627.chunk.js.map