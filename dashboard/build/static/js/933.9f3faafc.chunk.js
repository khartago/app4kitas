"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[933],{908:(e,t,n)=>{n.d(t,{WW:()=>o,_z:()=>l,ak:()=>r,gp:()=>u,lj:()=>s,qv:()=>d,tG:()=>h,ux:()=>i});var a=n(9722);const c="/api",i=async e=>(await a.A.get("".concat(c,"/groups/").concat(e,"/children?date=heute"),{withCredentials:!0})).data,d=async e=>(await a.A.get("".concat(c,"/groups/").concat(e,"/pending-checkins"),{withCredentials:!0})).data,r=async e=>(await a.A.get("".concat(c,"/educators/").concat(e,"/children"),{withCredentials:!0})).data,o=async e=>(await a.A.get("".concat(c,"/educators/").concat(e,"/group"),{withCredentials:!0})).data,s=async(e,t)=>{let n="".concat(c,"/messages");e?n+="/child/".concat(e):t&&(n+="/group/".concat(t));return(await a.A.get(n,{withCredentials:!0})).data},l=async e=>{const t=new FormData;e.content&&t.append("content",e.content),e.childId&&t.append("childId",e.childId),e.groupId&&t.append("groupId",e.groupId),e.file&&t.append("file",e.file);return(await a.A.post("".concat(c,"/message"),t,{headers:{"Content-Type":"multipart/form-data",withCredentials:!0}})).data};async function h(e){const t=await fetch("".concat(c,"/notes/child/").concat(e),{credentials:"include"});if(!t.ok)throw new Error("Fehler beim Laden der Notizen");return t.json()}async function u(e,t,n){const a=new FormData;a.append("childId",e),a.append("content",t),n&&a.append("file",n);const i=await fetch("".concat(c,"/notes"),{method:"POST",credentials:"include",body:a});if(!i.ok)throw new Error("Fehler beim Speichern der Notiz");return i.json()}},933:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(5043),c=n(8223),i=n(908),d=n(8845),r=n(4366),o=n(1924),s=n(579);const l=()=>{const{benutzer:e}=(0,c.J)(),[t,n]=(0,a.useState)([]),[l,h]=(0,a.useState)([]),[u,p]=(0,a.useState)(!0),[w,g]=(0,a.useState)(null),f=(0,r.Zp)();return(0,a.useEffect)(()=>{"EDUCATOR"===(null===e||void 0===e?void 0:e.role)&&(p(!0),Promise.all([(0,i.ux)(e.id),(0,i.qv)(e.id)]).then(e=>{let[t,a]=e;n(t),h(a)}).catch(()=>g("Fehler beim Laden der Daten.")).finally(()=>p(!1)))},[e]),"EDUCATOR"!==(null===e||void 0===e?void 0:e.role)?(0,s.jsx)(d.IW,{children:"Zugriff verweigert"}):u?(0,s.jsx)(d.BZ,{text:"Lade \xdcbersicht..."}):w?(0,s.jsx)(d.IW,{children:w}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{title:"Mein Tag"}),(0,s.jsxs)("div",{style:{marginTop:64},children:[(0,s.jsx)("h2",{children:"Heutige Kinder"}),(0,s.jsx)("ul",{children:t.map(e=>(0,s.jsx)(d.Zp,{children:e.name},e.id))}),(0,s.jsx)("h2",{children:"Offene Check-ins"}),(0,s.jsx)("ul",{children:l.map(e=>(0,s.jsx)(d.Zp,{children:e.childName},e.id))}),(0,s.jsx)(d.$n,{onClick:()=>f("/educator/Notizen"),children:"Zu Notizen"}),(0,s.jsx)(d.$n,{onClick:()=>f("/educator/Nachrichten"),children:"Zu Nachrichten"})]})]})}}}]);
//# sourceMappingURL=933.9f3faafc.chunk.js.map