"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[452],{2045:(n,e,t)=>{t.d(e,{$r:()=>p,Bp:()=>h,Bx:()=>c,Dx:()=>y,M6:()=>w,O6:()=>f,UR:()=>u,Uh:()=>a,Zr:()=>m,cM:()=>b,gv:()=>i,p2:()=>x,u_:()=>d,yS:()=>g,zC:()=>s});var r=t(9379);const o="/api";async function i(){const n=await fetch("".concat(o,"/users?role=ADMIN"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Fehler beim Laden der Institutionen (Admins)");return n.json()}async function c(){const n=await fetch("".concat(o,"/users?role=EDUCATOR"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Fehler beim Laden der Erzieher");return n.json()}async function a(){const n=await fetch("".concat(o,"/users?role=PARENT"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Fehler beim Laden der Eltern");return n.json()}async function s(n){const e=await fetch("".concat(o,"/institutionen"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!e.ok)throw new Error("Fehler beim Anlegen der Institution");return e.json()}async function l(){const n=await fetch("".concat(o,"/stats"),{credentials:"include"});if(!n.ok)throw new Error("Fehler beim Laden der Statistiken");return n.json()}const d=l,h=l;async function p(n){const e=await fetch("".concat(o,"/users"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)((0,r.A)({},n),{},{role:"EDUCATOR"}))});if(!e.ok)throw new Error("Fehler beim Anlegen des Erziehers");return e.json()}async function u(n,e){const t=await fetch("".concat(o,"/users/").concat(n),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Fehler beim Bearbeiten des Erziehers");return t.json()}async function m(n){const e=await fetch("".concat(o,"/users/").concat(n),{method:"DELETE",credentials:"include"});if(!e.ok)throw new Error("Fehler beim L\xf6schen des Erziehers");return e.json()}async function f(n){const e=await fetch("".concat(o,"/users"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)((0,r.A)({},n),{},{role:"PARENT"}))});if(!e.ok)throw new Error("Fehler beim Anlegen des Elternteils");return e.json()}async function x(n,e){const t=await fetch("".concat(o,"/users/").concat(n),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Fehler beim Bearbeiten des Elternteils");return t.json()}async function b(n){const e=await fetch("".concat(o,"/users/").concat(n),{method:"DELETE",credentials:"include"});if(!e.ok)throw new Error("Fehler beim L\xf6schen des Elternteils");return e.json()}async function w(n,e){const t=await fetch("".concat(o,"/institutionen/").concat(n),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error("Fehler beim Bearbeiten der Institution");return t.json()}async function y(n){const e=await fetch("".concat(o,"/institutionen/").concat(n),{method:"DELETE",credentials:"include"});if(!e.ok)throw new Error("Fehler beim L\xf6schen der Institution");return e.json()}async function g(){const n=await fetch("".concat(o,"/institutionen"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Fehler beim Laden der Institutionen");return n.json()}},3452:(n,e,t)=>{t.r(e),t.d(e,{default:()=>D});var r,o,i,c,a,s,l,d,h,p,u=t(7528),m=t(5043),f=t(5464),x=t(8223),b=t(2045),w=t(8845),y=t(1924),g=t(4255),j=t(2774),k=t(579);const E=(0,f.Ay)(w.Zp)(r||(r=(0,u.A)(["\n  width: ",";\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  text-align: center;\n  min-height: 140px;\n  border: ",";\n  box-shadow: ",";\n  padding: ",";\n  border-radius: ",";\n  margin: 0;\n  @media (max-width: 900px) {\n    width: 100%;\n  }\n  @media (max-width: 600px) {\n    min-height: 100px;\n    padding: 14px 8px;\n    width: 100%;\n  }\n"])),n=>{let{cardWidth:e}=n;return e||"100%"},n=>{let{accent:e,theme:t}=n;return e?"2.5px solid ".concat(t.colors.accent):t.components.card.border},n=>{let{accent:e,theme:t}=n;return e?"0 4px 24px rgba(255,193,7,0.10)":t.components.card.boxShadow},n=>{let{theme:e}=n;return e.components.card.padding},n=>{let{theme:e}=n;return e.components.card.borderRadius}),A=f.Ay.h3(o||(o=(0,u.A)(["\n  margin: 0;\n  font-weight: 700;\n  font-size: ","px;\n  color: ",";\n  @media (max-width: 600px) {\n    font-size: 1.1rem;\n  }\n"])),n=>{let{theme:e}=n;return e.typography.headline2.fontSize},n=>{let{theme:e}=n;return e.colors.textPrimary}),z=f.Ay.p(i||(i=(0,u.A)(["\n  font-size: 2.2rem;\n  font-weight: 700;\n  margin: 8px 0 0 0;\n  color: ",";\n  @media (max-width: 600px) {\n    font-size: 1.3rem;\n  }\n"])),n=>{let{theme:e}=n;return e.colors.primary}),S=f.Ay.div(c||(c=(0,u.A)(["\n  background: ",";\n  border-radius: 50%;\n  width: 48px;\n  height: 48px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin-bottom: 12px;\n  box-shadow: 0 2px 8px rgba(44,62,80,0.10);\n  @media (max-width: 600px) {\n    width: 36px;\n    height: 36px;\n    margin-bottom: 8px;\n    svg { font-size: 18px !important; }\n  }\n"])),n=>{let{color:e}=n;return e}),F=f.Ay.div(a||(a=(0,u.A)(["\n  display: flex;\n  justify-content: center;\n  gap: 3%;\n  margin-bottom: 32px;\n  @media (max-width: 900px) {\n    flex-direction: column;\n    gap: 16px;\n    align-items: stretch;\n    margin-bottom: 18px;\n  }\n"]))),C=((0,f.Ay)(w.$j)(s||(s=(0,u.A)(["\n  margin-top: 32px;\n  margin-bottom: 12px;\n  text-align: left;\n  @media (max-width: 600px) {\n    margin-top: 18px;\n    margin-bottom: 8px;\n    font-size: 1.2rem;\n  }\n"]))),f.Ay.div(l||(l=(0,u.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  margin-bottom: 8px;\n  margin-top: 30px;\n"])))),T=f.Ay.div(d||(d=(0,u.A)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  min-width: 100px;\n  max-width: 140px;\n  margin: 0 auto 0 auto;\n  margin-bottom: -85px;\n  @media (max-width: 600px) {\n    max-width: 90px;\n    min-width: 70px;\n  }\n"]))),v=f.Ay.hr(h||(h=(0,u.A)(["\n  width: 100%;\n  border: none;\n  border-top: 1.5px solid ",";\n  margin: 24px 0 12px 0;\n  @media (max-width: 600px) {\n    margin: 12px 0 8px 0;\n  }\n"])),n=>{let{theme:e}=n;return e.colors.border}),L=f.Ay.button(p||(p=(0,u.A)(["\n  background: ",";\n  color: #212121;\n  border: none;\n  border-radius: 12px;\n  padding: 10px 22px;\n  font-size: 1rem;\n  font-weight: 700;\n  margin: 0 auto 18px auto;\n  display: block;\n  box-shadow: 0 2px 8px rgba(255,193,7,0.10);\n  cursor: pointer;\n  transition: background 0.18s, color 0.18s;\n  &:hover, &:focus {\n    background: ",";\n    color: #fff;\n    outline: none;\n  }\n"])),n=>{let{theme:e}=n;return e.colors.accent},n=>{let{theme:e}=n;return e.colors.primary}),O=[{key:"users",label:"Alle Nutzer",icon:(0,k.jsx)(j.YXz,{size:24,color:"#fff"}),color:"#4CAF50"},{key:"admins",label:"Admins (Kita-Leitung)",icon:(0,k.jsx)(j.p7b,{size:24,color:"#fff"}),color:"#388E3C"},{key:"educators",label:"Erzieher:innen",icon:(0,k.jsx)(j.$hd,{size:24,color:"#fff"}),color:"#1976D2"},{key:"parents",label:"Eltern",icon:(0,k.jsx)(j.M5n,{size:24,color:"#fff"}),color:"#FFC107"},{key:"children",label:"Kinder",icon:(0,k.jsx)(j.U6x,{size:24,color:"#fff"}),color:"#FF7043"},{key:"groups",label:"Gruppen",icon:(0,k.jsx)(j.aQJ,{size:24,color:"#fff"}),color:"#7B1FA2"},{key:"checkins",label:"Check-ins",icon:(0,k.jsx)(j.Zu,{size:24,color:"#fff"}),color:"#009688"},{key:"messages",label:"Nachrichten",icon:(0,k.jsx)(j.maD,{size:24,color:"#fff"}),color:"#0288D1"},{key:"notifications",label:"Benachrichtigungen",icon:(0,k.jsx)(j.jNV,{size:24,color:"#fff"}),color:"#FFB300"}],N=O.slice(0,4),U=O.slice(4);function B(n,e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=[];for(let o=0;o<n.length;o+=3){const i=n.slice(o,o+3);let c="100%";2===i.length&&(c="48.5%"),3===i.length&&(c="30%"),r.push((0,k.jsx)(F,{children:i.map((n,r)=>{var i;return(0,k.jsxs)(E,{accent:t&&o+r===0,"aria-label":n.label,tabIndex:0,cardWidth:c,children:[(0,k.jsx)(S,{color:n.color,children:n.icon}),(0,k.jsx)(A,{children:n.label}),(0,k.jsx)(z,{children:null!==(i=e[n.key])&&void 0!==i?i:0})]},n.key)})},o))}return r}const D=()=>{const{benutzer:n}=(0,x.J)(),[e,t]=(0,m.useState)({}),[r,o]=(0,m.useState)(!0),[i,c]=(0,m.useState)(null);return(0,m.useEffect)(()=>{"SUPER_ADMIN"===(null===n||void 0===n?void 0:n.role)&&(o(!0),(0,b.Bp)().then(t).catch(()=>c("Fehler beim Laden der Statistiken.")).finally(()=>o(!1)))},[n]),"SUPER_ADMIN"!==(null===n||void 0===n?void 0:n.role)?(0,k.jsx)(w.IW,{children:"Zugriff verweigert"}):r?(0,k.jsx)(w.BZ,{text:"Lade Statistiken..."}):i?(0,k.jsx)(w.IW,{children:i}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(y.A,{title:"Plattformweite Statistiken"}),(0,k.jsxs)(C,{children:[(0,k.jsx)(T,{children:(0,k.jsx)(g.A,{size:120,mood:"happy",speechBubble:void 0})}),(0,k.jsx)(w.$j,{as:"div",style:{fontSize:18,margin:0,color:"#388E3C",textAlign:"center"},children:"Hier findest du alle wichtigen Zahlen!"})]}),(0,k.jsx)(L,{onClick:()=>function(n){const e="Kategorie;Wert\n"+Object.entries(n).map(n=>{let[e,t]=n;return{Kategorie:e,Wert:t}}).map(n=>"".concat(n.Kategorie,";").concat(n.Wert)).join("\n"),t=new Blob([e],{type:"text/csv"}),r=URL.createObjectURL(t),o=document.createElement("a");o.href=r,o.download="plattform-statistiken.csv",o.click(),URL.revokeObjectURL(r)}(e),"aria-label":"Statistiken als CSV exportieren",children:"Statistiken als CSV exportieren"}),B(N,e,!0),(0,k.jsx)(v,{}),B(U,e)]})}}}]);
//# sourceMappingURL=452.4ce17344.chunk.js.map