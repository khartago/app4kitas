"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[868],{908:(e,t,n)=>{n.d(t,{WW:()=>d,_z:()=>s,ak:()=>l,gp:()=>u,lj:()=>o,qv:()=>i,tG:()=>h,ux:()=>r});var a=n(9722);const c="/api",r=async e=>(await a.A.get("".concat(c,"/groups/").concat(e,"/children?date=heute"),{withCredentials:!0})).data,i=async e=>(await a.A.get("".concat(c,"/groups/").concat(e,"/pending-checkins"),{withCredentials:!0})).data,l=async e=>(await a.A.get("".concat(c,"/educators/").concat(e,"/children"),{withCredentials:!0})).data,d=async e=>(await a.A.get("".concat(c,"/educators/").concat(e,"/group"),{withCredentials:!0})).data,o=async(e,t)=>{let n="".concat(c,"/messages");e?n+="/child/".concat(e):t&&(n+="/group/".concat(t));return(await a.A.get(n,{withCredentials:!0})).data},s=async e=>{const t=new FormData;e.content&&t.append("content",e.content),e.childId&&t.append("childId",e.childId),e.groupId&&t.append("groupId",e.groupId),e.file&&t.append("file",e.file);return(await a.A.post("".concat(c,"/message"),t,{headers:{"Content-Type":"multipart/form-data",withCredentials:!0}})).data};async function h(e){const t=await fetch("".concat(c,"/notes/child/").concat(e),{credentials:"include"});if(!t.ok)throw new Error("Fehler beim Laden der Notizen");return t.json()}async function u(e,t,n){const a=new FormData;a.append("childId",e),a.append("content",t),n&&a.append("file",n);const r=await fetch("".concat(c,"/notes"),{method:"POST",credentials:"include",body:a});if(!r.ok)throw new Error("Fehler beim Speichern der Notiz");return r.json()}},7868:(e,t,n)=>{n.r(t),n.d(t,{default:()=>o});var a=n(5043),c=n(8223),r=n(908),i=n(8845),l=n(1924),d=n(579);const o=()=>{const{benutzer:e}=(0,c.J)(),[t,n]=(0,a.useState)([]),[o,s]=(0,a.useState)(!0),[h,u]=(0,a.useState)(null),[p,f]=(0,a.useState)(""),[g,w]=(0,a.useState)(null),j=(0,a.useRef)(null);(0,a.useEffect)(()=>{"EDUCATOR"===(null===e||void 0===e?void 0:e.role)&&(s(!0),(0,r.lj)().then(n).catch(()=>u("Fehler beim Laden der Nachrichten.")).finally(()=>s(!1)))},[e]);return"EDUCATOR"!==(null===e||void 0===e?void 0:e.role)?(0,d.jsx)(i.IW,{children:"Zugriff verweigert"}):o?(0,d.jsx)(i.BZ,{text:"Lade Nachrichten..."}):h?(0,d.jsx)(i.IW,{children:h}):(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.A,{title:"Nachrichten an Eltern"}),(0,d.jsxs)("div",{style:{marginTop:64},children:[(0,d.jsx)(i.pd,{placeholder:"Nachricht",value:p,onChange:e=>f(e.target.value)}),(0,d.jsx)("input",{type:"file",accept:".pdf,image/*",ref:j,onChange:e=>{var t;return w((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,d.jsx)(i.$n,{onClick:async()=>{if(p||g){s(!0);try{await(0,r._z)({content:p,file:null!==g&&void 0!==g?g:void 0}),n(await(0,r.lj)()),f(""),w(null),j.current&&(j.current.value="")}catch(e){u("Fehler beim Senden der Nachricht.")}s(!1)}},children:"Senden"}),(0,d.jsx)("ul",{children:t.map(e=>(0,d.jsxs)(i.Zp,{children:[(0,d.jsx)("p",{children:e.content}),e.fileUrl&&(0,d.jsx)("a",{href:e.fileUrl,target:"_blank",rel:"noopener noreferrer",children:"Anhang"}),(0,d.jsx)("p",{children:e.createdAt})]},e.id))})]})]})}}}]);
//# sourceMappingURL=868.a70ea1a9.chunk.js.map