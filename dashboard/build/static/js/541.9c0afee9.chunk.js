"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[541],{2045:(e,n,t)=>{t.d(n,{$r:()=>u,Bp:()=>h,Bx:()=>o,Dx:()=>x,M6:()=>g,O6:()=>m,UR:()=>p,Uh:()=>s,Zr:()=>w,cM:()=>y,gv:()=>i,p2:()=>f,u_:()=>d,yS:()=>b,zC:()=>c});var a=t(9379);const r="/api";async function i(){const e=await fetch("".concat(r,"/users?role=ADMIN"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fehler beim Laden der Institutionen (Admins)");return e.json()}async function o(){const e=await fetch("".concat(r,"/users?role=EDUCATOR"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fehler beim Laden der Erzieher");return e.json()}async function s(){const e=await fetch("".concat(r,"/users?role=PARENT"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fehler beim Laden der Eltern");return e.json()}async function c(e){const n=await fetch("".concat(r,"/institutionen"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("Fehler beim Anlegen der Institution");return n.json()}async function l(){const e=await fetch("".concat(r,"/stats"),{credentials:"include"});if(!e.ok)throw new Error("Fehler beim Laden der Statistiken");return e.json()}const d=l,h=l;async function u(e){const n=await fetch("".concat(r,"/users"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,a.A)((0,a.A)({},e),{},{role:"EDUCATOR"}))});if(!n.ok)throw new Error("Fehler beim Anlegen des Erziehers");return n.json()}async function p(e,n){const t=await fetch("".concat(r,"/users/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Fehler beim Bearbeiten des Erziehers");return t.json()}async function w(e){const n=await fetch("".concat(r,"/users/").concat(e),{method:"DELETE",credentials:"include"});if(!n.ok)throw new Error("Fehler beim L\xf6schen des Erziehers");return n.json()}async function m(e){const n=await fetch("".concat(r,"/users"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,a.A)((0,a.A)({},e),{},{role:"PARENT"}))});if(!n.ok)throw new Error("Fehler beim Anlegen des Elternteils");return n.json()}async function f(e,n){const t=await fetch("".concat(r,"/users/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Fehler beim Bearbeiten des Elternteils");return t.json()}async function y(e){const n=await fetch("".concat(r,"/users/").concat(e),{method:"DELETE",credentials:"include"});if(!n.ok)throw new Error("Fehler beim L\xf6schen des Elternteils");return n.json()}async function g(e,n){const t=await fetch("".concat(r,"/institutionen/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Fehler beim Bearbeiten der Institution");return t.json()}async function x(e){const n=await fetch("".concat(r,"/institutionen/").concat(e),{method:"DELETE",credentials:"include"});if(!n.ok)throw new Error("Fehler beim L\xf6schen der Institution");return n.json()}async function b(){const e=await fetch("".concat(r,"/institutionen"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fehler beim Laden der Institutionen");return e.json()}},2541:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});var a,r,i,o=t(9379),s=t(7528),c=t(5043),l=t(8223),d=t(2045),h=t(8845),u=t(1924),p=t(3411),w=t(1146),m=t(5464),f=t(5974),y=t(579);const g=m.Ay.button(a||(a=(0,s.A)(["\n  background: ",";\n  color: #212121;\n  font-size: 17px;\n  font-weight: 700;\n  padding: 12px 28px;\n  border-radius: 14px;\n  box-shadow: 0 2px 10px rgba(255,193,7,0.10);\n  border: none;\n  margin-left: 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  cursor: pointer;\n  transition: background 0.18s, box-shadow 0.18s, transform 0.18s, opacity 0.18s;\n  opacity: 0.97;\n  will-change: transform, opacity;\n  &:hover {\n    background: ",";\n    color: #fff;\n    transform: scale(1.045);\n    opacity: 1;\n    box-shadow: 0 8px 32px rgba(76,175,80,0.16);\n  }\n  @media (max-width: 700px) {\n    width: 100%;\n    margin-top: 10px;\n    justify-content: center;\n    font-size: 16px;\n    padding: 12px 0;\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent},e=>{let{theme:n}=e;return n.colors.primary}),x=(m.Ay.div(r||(r=(0,s.A)(["\n  display: flex;\n  align-items: center;\n  gap: 18px;\n  width: 100%;\n"]))),(0,m.Ay)(p.A)(i||(i=(0,s.A)(["\n  margin-right: 10px;\n"])))),b=()=>{const{benutzer:e}=(0,l.J)(),[n,t]=(0,c.useState)([]),[a,r]=(0,c.useState)(!0),[i,s]=(0,c.useState)(null),[p,m]=(0,c.useState)(""),[b,j]=(0,c.useState)(!1),[E,A]=(0,c.useState)({name:"",email:"",password:""}),[C,k]=(0,c.useState)(null),[S,v]=(0,c.useState)(0),[F,z]=(0,c.useState)(10),[T,P]=(0,c.useState)([]),[N,I]=(0,c.useState)([]),U=async()=>{r(!0),s(null);try{const e=await(0,d.Bx)();t(e)}catch(e){s(e.message||"Fehler beim Laden der Erzieher.")}r(!1)};(0,c.useEffect)(()=>{"SUPER_ADMIN"===(null===e||void 0===e?void 0:e.role)&&(U(),(0,f.pl)().then(P))},[e]);if("SUPER_ADMIN"!==(null===e||void 0===e?void 0:e.role))return(0,y.jsx)(h.IW,{children:"Zugriff verweigert"});if(a)return(0,y.jsx)(h.BZ,{text:"Lade Erzieher..."});if(i)return(0,y.jsx)(h.IW,{children:i});return(0,y.jsxs)("main",{style:{maxWidth:1100,margin:"0 auto",padding:"32px 0 0 0",display:"flex",flexDirection:"column",alignItems:"stretch"},children:[(0,y.jsx)(u.A,{title:"Erzieher-\xdcbersicht"}),(0,y.jsxs)(h.Lj,{children:[(0,y.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0,marginBottom:18},children:[(0,y.jsx)("span",{style:{fontSize:"1.25em",fontWeight:700,color:"#4CAF50",marginBottom:8},children:"Erzieher"}),(0,y.jsxs)(h.VI,{children:[(0,y.jsxs)(h.sw,{style:{flex:1,width:"100%"},children:[(0,y.jsx)(h.VV,{type:"text",placeholder:"Suchen...",value:p,onChange:e=>m(e.target.value),"aria-label":"Suchen"}),(0,y.jsx)(x,{})]}),(0,y.jsx)(g,{onClick:()=>j(!0),children:"+ Hinzuf\xfcgen"})]})]}),(0,y.jsx)(h.bQ,{data:n,columns:[{key:"name",label:"Name",editable:!0,filterable:!0,sortable:!0},{key:"email",label:"E-Mail",editable:!0,filterable:!0,sortable:!0},{key:"password",label:"Passwort (neu setzen)",editable:!0},{key:"id",label:"Erzieher-ID",editable:!1,filterable:!0,sortable:!0}],onEdit:async e=>{r(!0);try{await(0,d.UR)(e.id,{name:e.name,email:e.email,password:e.password||void 0}),await U()}catch(n){s(n.message||"Fehler beim Bearbeiten.")}r(!1)},onDelete:async e=>{r(!0);try{await(0,d.Zr)(e.id),await U()}catch(n){s(n.message||"Fehler beim L\xf6schen.")}r(!1)},entityName:"Erzieher",search:p,page:S,rowsPerPage:F,onPageChange:v,onRowsPerPageChange:e=>{z(e),v(0)},totalCount:n.length})]}),(0,y.jsxs)(w.Ay,{open:b,onClose:()=>{j(!1),k(null)},title:"Erzieher/in hinzuf\xfcgen",children:[C&&(0,y.jsx)(w.yn,{children:C}),(0,y.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(E.name&&E.email&&E.password){r(!0),k(null);try{await(0,d.$r)({name:E.name,email:E.email,password:E.password,groupIds:N}),j(!1),A({name:"",email:"",password:""}),I([]),await U()}catch(e){k(e.message||"Fehler beim Hinzuf\xfcgen.")}r(!1)}else k("Name, E-Mail und Passwort sind erforderlich.")})()},children:[(0,y.jsxs)(w.zB,{children:[(0,y.jsx)(w.JU,{htmlFor:"educator-name",children:"Name"}),(0,y.jsx)(w.pd,{id:"educator-name",value:E.name,onChange:e=>A(n=>(0,o.A)((0,o.A)({},n),{},{name:e.target.value})),autoFocus:!0,required:!0})]}),(0,y.jsxs)(w.zB,{children:[(0,y.jsx)(w.JU,{htmlFor:"educator-email",children:"E-Mail"}),(0,y.jsx)(w.pd,{id:"educator-email",type:"email",value:E.email,onChange:e=>A(n=>(0,o.A)((0,o.A)({},n),{},{email:e.target.value})),required:!0})]}),(0,y.jsxs)(w.zB,{children:[(0,y.jsx)(w.JU,{htmlFor:"educator-password",children:"Passwort"}),(0,y.jsx)(w.pd,{id:"educator-password",type:"password",value:E.password,onChange:e=>A(n=>(0,o.A)((0,o.A)({},n),{},{password:e.target.value})),required:!0})]}),(0,y.jsxs)(w.zB,{children:[(0,y.jsx)(w.JU,{htmlFor:"educator-groups",children:"Gruppen"}),(0,y.jsx)("select",{id:"educator-groups",multiple:!0,value:N,onChange:e=>I(Array.from(e.target.selectedOptions).map(e=>e.value)),style:{width:"100%",padding:10,borderRadius:8,border:"1.5px solid #E0E0E0"},children:T.map(e=>(0,y.jsx)("option",{value:e.id,children:e.name},e.id))})]}),(0,y.jsx)(w.yl,{type:"submit",children:"Hinzuf\xfcgen"})]})]})]})}},3411:(e,n,t)=>{t.d(n,{A:()=>l});var a,r=t(7528),i=(t(5043),t(2774)),o=t(5464),s=t(579);const c=o.Ay.div(a||(a=(0,r.A)(["\n  position: absolute;\n  left: 18px;\n  top: 50%;\n  transform: translateY(-50%);\n  color: #757575;\n  pointer-events: none;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n"]))),l=()=>(0,s.jsx)(c,{children:(0,s.jsx)(i.KSO,{})})},5974:(e,n,t)=>{t.d(n,{$:()=>s,$r:()=>y,Bx:()=>p,EZ:()=>m,F4:()=>w,Iw:()=>u,N6:()=>h,RN:()=>b,UR:()=>g,Zr:()=>x,dE:()=>i,kC:()=>c,oS:()=>d,pl:()=>o,qU:()=>f,st:()=>l});var a=t(9722);const r="/api",i=async()=>(await a.A.get("".concat(r,"/admin/stats"),{withCredentials:!0})).data,o=async()=>(await a.A.get("".concat(r,"/groups"),{withCredentials:!0})).data,s=async e=>(await a.A.post("".concat(r,"/groups"),e,{withCredentials:!0})).data,c=async(e,n)=>(await a.A.put("".concat(r,"/groups/").concat(e,"/educators"),{educatorIds:n},{withCredentials:!0})).data,l=async()=>(await a.A.get("".concat(r,"/children"),{withCredentials:!0})).data,d=async e=>(await a.A.post("".concat(r,"/children"),e,{withCredentials:!0})).data,h=async(e,n)=>(await a.A.put("".concat(r,"/children/").concat(e),n,{withCredentials:!0})).data,u=async(e,n)=>{const t=new FormData;t.append("photo",n);return(await a.A.put("".concat(r,"/children/").concat(e,"/photo"),t,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data},p=async()=>(await a.A.get("".concat(r,"/educators"),{withCredentials:!0})).data,w=async()=>(await a.A.get("".concat(r,"/checkin/stats"),{withCredentials:!0})).data,m=async e=>(await a.A.delete("".concat(r,"/children/").concat(e),{withCredentials:!0})).data,f=e=>{window.open("".concat(r,"/children/export?format=").concat(e),"_blank")},y=async e=>(await a.A.post("".concat(r,"/educators"),e,{withCredentials:!0})).data,g=async(e,n)=>(await a.A.put("".concat(r,"/educators/").concat(e),n,{withCredentials:!0})).data,x=async e=>(await a.A.delete("".concat(r,"/educators/").concat(e),{withCredentials:!0})).data,b=e=>{window.open("".concat(r,"/educators/export?format=").concat(e),"_blank")}}}]);
//# sourceMappingURL=541.9c0afee9.chunk.js.map