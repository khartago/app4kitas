"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[856],{856:(t,e,n)=>{n.r(e),n.d(e,{default:()=>C});var a,i,c,s,r,d=n(7528),o=n(5043),h=n(5464),l=n(4255),p=n(8845),w=n(5974),u=n(7717),x=n(1924),g=n(579);const m=h.Ay.div(a||(a=(0,d.A)(["\n  display: flex;\n  align-items: flex-end;\n  height: 200px;\n  margin-bottom: 32px;\n"]))),y=h.Ay.div(i||(i=(0,d.A)(["\n  background: #4CAF50;\n  width: 32px;\n  margin: 0 8px;\n  border-radius: 8px 8px 0 0;\n  height: ","px;\n"])),t=>t.height),j=h.Ay.div(c||(c=(0,d.A)(["\n  text-align: center;\n  font-size: 12px;\n  margin-top: 4px;\n"]))),A=h.Ay.div(s||(s=(0,d.A)(["\n  display: flex;\n  gap: 12px;\n  margin-bottom: 16px;\n"]))),f=h.Ay.div(r||(r=(0,d.A)(["\n  text-align: center;\n  margin: 48px 0;\n"]))),C=()=>{const[t,e]=(0,o.useState)([]),[n,a]=(0,o.useState)(!0),[i,c]=(0,o.useState)(null),[s,r]=(0,o.useState)(()=>(new Date).toISOString().slice(0,7)),[d,h]=(0,o.useState)([]),[C,S]=(0,o.useState)(!1),[b,k]=(0,o.useState)(null);return(0,o.useEffect)(()=>{a(!0),(0,w.F4)().then(e).catch(()=>c("Fehler beim Laden der Statistiken.")).finally(()=>a(!1))},[]),(0,o.useEffect)(()=>{S(!0),(0,u.Qs)(s).then(t=>h(t.report)).catch(()=>k("Fehler beim Laden des Monatsberichts.")).finally(()=>S(!1))},[s]),(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(x.A,{title:"Check-in/out Statistiken"}),(0,g.jsxs)("div",{style:{marginTop:64},children:[(0,g.jsx)(p.$j,{children:"Check-in/out Statistiken (letzte Woche)"}),(0,g.jsx)(A,{children:(0,g.jsx)(p.$n,{onClick:()=>(0,u.CF)(s),children:"Monatsbericht als CSV exportieren"})}),n?(0,g.jsx)("div",{children:"L\xe4dt..."}):0===t.length?(0,g.jsxs)(f,{children:[(0,g.jsx)(l.A,{size:80,mood:"help"}),(0,g.jsx)("div",{children:"Keine Statistikdaten gefunden."})]}):(0,g.jsx)(m,{children:t.map((t,e)=>(0,g.jsxs)("div",{children:[(0,g.jsx)(y,{height:10*t.count}),(0,g.jsx)(j,{children:t.label})]},e))}),(0,g.jsx)(p.$j,{children:"Monatsbericht"}),(0,g.jsx)("input",{type:"month",value:s,onChange:t=>r(t.target.value)}),C?(0,g.jsx)("div",{children:"L\xe4dt..."}):b?(0,g.jsx)("div",{style:{color:"red"},children:b}):0===d.length?(0,g.jsxs)(f,{children:[(0,g.jsx)(l.A,{size:80,mood:"help"}),(0,g.jsx)("div",{children:"Keine Berichtsdaten gefunden."})]}):(0,g.jsxs)("table",{style:{width:"100%",marginTop:24},children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:"Name"}),(0,g.jsx)("th",{children:"Anwesenheitstage"})]})}),(0,g.jsx)("tbody",{children:d.map(t=>(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:t.name}),(0,g.jsx)("td",{children:t.checkInDays})]},t.childId))})]})]})]})}},5974:(t,e,n)=>{n.d(e,{$:()=>r,$r:()=>m,Bx:()=>w,EZ:()=>x,F4:()=>u,Iw:()=>p,N6:()=>l,RN:()=>A,UR:()=>y,Zr:()=>j,dE:()=>c,kC:()=>d,oS:()=>h,pl:()=>s,qU:()=>g,st:()=>o});var a=n(9722);const i="/api",c=async()=>(await a.A.get("".concat(i,"/admin/stats"),{withCredentials:!0})).data,s=async()=>(await a.A.get("".concat(i,"/groups"),{withCredentials:!0})).data,r=async t=>(await a.A.post("".concat(i,"/groups"),t,{withCredentials:!0})).data,d=async(t,e)=>(await a.A.put("".concat(i,"/groups/").concat(t,"/educators"),{educatorIds:e},{withCredentials:!0})).data,o=async()=>(await a.A.get("".concat(i,"/children"),{withCredentials:!0})).data,h=async t=>(await a.A.post("".concat(i,"/children"),t,{withCredentials:!0})).data,l=async(t,e)=>(await a.A.put("".concat(i,"/children/").concat(t),e,{withCredentials:!0})).data,p=async(t,e)=>{const n=new FormData;n.append("photo",e);return(await a.A.put("".concat(i,"/children/").concat(t,"/photo"),n,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data},w=async()=>(await a.A.get("".concat(i,"/educators"),{withCredentials:!0})).data,u=async()=>(await a.A.get("".concat(i,"/checkin/stats"),{withCredentials:!0})).data,x=async t=>(await a.A.delete("".concat(i,"/children/").concat(t),{withCredentials:!0})).data,g=t=>{window.open("".concat(i,"/children/export?format=").concat(t),"_blank")},m=async t=>(await a.A.post("".concat(i,"/educators"),t,{withCredentials:!0})).data,y=async(t,e)=>(await a.A.put("".concat(i,"/educators/").concat(t),e,{withCredentials:!0})).data,j=async t=>(await a.A.delete("".concat(i,"/educators/").concat(t),{withCredentials:!0})).data,A=t=>{window.open("".concat(i,"/educators/export?format=").concat(t),"_blank")}},7717:(t,e,n)=>{async function a(t,e){const n=new URLSearchParams({date:t});e&&n.append("groupId",e);const a=await fetch("/api/reports/daily?".concat(n.toString()));if(!a.ok)throw new Error("Fehler beim Laden des Tagesberichts");return a.json()}function i(t,e){const n=new URLSearchParams({date:t,format:"csv"});e&&n.append("groupId",e),window.open("/api/reports/daily/export?".concat(n.toString()))}async function c(t,e){const n=new URLSearchParams({month:t});e&&n.append("groupId",e);const a=await fetch("/api/reports/monthly?".concat(n.toString()));if(!a.ok)throw new Error("Fehler beim Laden des Monatsberichts");return a.json()}function s(t,e){const n=new URLSearchParams({month:t,format:"csv"});e&&n.append("groupId",e),window.open("/api/reports/monthly/export?".concat(n.toString()))}n.d(e,{CF:()=>s,Ct:()=>i,Qs:()=>c,yH:()=>a})}}]);
//# sourceMappingURL=856.d35f2ce2.chunk.js.map