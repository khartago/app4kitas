"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[10],{908:(e,t,n)=>{n.d(t,{WW:()=>o,_z:()=>l,ak:()=>r,gp:()=>p,lj:()=>s,qv:()=>d,tG:()=>h,ux:()=>i});var a=n(9722);const c="/api",i=async e=>(await a.A.get("".concat(c,"/groups/").concat(e,"/children?date=heute"),{withCredentials:!0})).data,d=async e=>(await a.A.get("".concat(c,"/groups/").concat(e,"/pending-checkins"),{withCredentials:!0})).data,r=async e=>(await a.A.get("".concat(c,"/educators/").concat(e,"/children"),{withCredentials:!0})).data,o=async e=>(await a.A.get("".concat(c,"/educators/").concat(e,"/group"),{withCredentials:!0})).data,s=async(e,t)=>{let n="".concat(c,"/messages");e?n+="/child/".concat(e):t&&(n+="/group/".concat(t));return(await a.A.get(n,{withCredentials:!0})).data},l=async e=>{const t=new FormData;e.content&&t.append("content",e.content),e.childId&&t.append("childId",e.childId),e.groupId&&t.append("groupId",e.groupId),e.file&&t.append("file",e.file);return(await a.A.post("".concat(c,"/message"),t,{headers:{"Content-Type":"multipart/form-data",withCredentials:!0}})).data};async function h(e){const t=await fetch("".concat(c,"/notes/child/").concat(e),{credentials:"include"});if(!t.ok)throw new Error("Fehler beim Laden der Notizen");return t.json()}async function p(e,t,n){const a=new FormData;a.append("childId",e),a.append("content",t),n&&a.append("file",n);const i=await fetch("".concat(c,"/notes"),{method:"POST",credentials:"include",body:a});if(!i.ok)throw new Error("Fehler beim Speichern der Notiz");return i.json()}},6010:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var a=n(9379),c=n(5043),i=n(8223),d=n(908),r=n(8845),o=n(1924),s=n(579);const l=()=>{const{benutzer:e}=(0,i.J)(),[t,n]=(0,c.useState)([]),[l,h]=(0,c.useState)(!0),[p,u]=(0,c.useState)(null),[g,w]=(0,c.useState)({childId:"",content:""});(0,c.useEffect)(()=>{e&&"EDUCATOR"===e.role&&(h(!0),(0,d.tG)(e.id).then(n).catch(()=>u("Fehler beim Laden der Notizen.")).finally(()=>h(!1)))},[e]);return e&&"EDUCATOR"===e.role?l?(0,s.jsx)(r.BZ,{text:"Lade Notizen..."}):p?(0,s.jsx)(r.IW,{children:p}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.A,{title:"Tagesnotizen"}),(0,s.jsxs)("div",{style:{marginTop:64},children:[(0,s.jsx)(r.pd,{placeholder:"Kind-ID",value:g.childId,onChange:e=>w((0,a.A)((0,a.A)({},g),{},{childId:e.target.value}))}),(0,s.jsx)(r.pd,{placeholder:"Notiz",value:g.content,onChange:e=>w((0,a.A)((0,a.A)({},g),{},{content:e.target.value}))}),(0,s.jsx)(r.$n,{onClick:async()=>{if(e&&g.childId&&g.content){h(!0);try{await(0,d.gp)(g.childId,g.content),n(await(0,d.tG)(e.id)),w({childId:"",content:""})}catch(t){u("Fehler beim Hinzuf\xfcgen der Notiz.")}h(!1)}},children:"Hinzuf\xfcgen"}),(0,s.jsx)("ul",{children:t.map(e=>(0,s.jsxs)(r.Zp,{children:[(0,s.jsx)("h3",{children:e.childName}),(0,s.jsx)("p",{children:e.content}),(0,s.jsx)("p",{children:e.createdAt})]},e.id))})]})]}):(0,s.jsx)(r.IW,{children:"Zugriff verweigert"})}}}]);
//# sourceMappingURL=10.32afb350.chunk.js.map