{"version":3,"file":"static/js/933.9f3faafc.chunk.js","mappings":"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","sources":["services/educatorApi.ts","pages/educator/Dashboard.tsx"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = '/api';\n\n// Holt alle Gruppen für Erzieher\nexport const getGruppen = async () => {\n  const res = await axios.get(`${API_URL}/groups`, { withCredentials: true });\n  return res.data;\n};\n\n// Holt alle Kinder einer Gruppe\nexport const getKinderByGruppe = async (groupId: string) => {\n  const res = await axios.get(`${API_URL}/groups/${groupId}/children`, { withCredentials: true });\n  return res.data;\n};\n\n// Check-in/out für ein Kind\nexport const checkinKind = async (childId: string, type: 'IN' | 'OUT', method: 'QR' | 'MANUAL') => {\n  const res = await axios.post(`${API_URL}/checkin`, { childId, type, method }, { withCredentials: true });\n  return res.data;\n};\n\n// Holt die heutigen Kinder der Erziehergruppe\nexport const fetchTodaysChildren = async (groupId: string) => {\n  const res = await axios.get(`${API_URL}/groups/${groupId}/children?date=heute`, { withCredentials: true });\n  return res.data;\n};\n\n// Holt ausstehende Check-ins\nexport const fetchPendingCheckins = async (groupId: string) => {\n  const res = await axios.get(`${API_URL}/groups/${groupId}/pending-checkins`, { withCredentials: true });\n  return res.data;\n};\n\n// Holt zugewiesene Kinder\nexport const fetchAssignedChildren = async (educatorId: string) => {\n  const res = await axios.get(`${API_URL}/educators/${educatorId}/children`, { withCredentials: true });\n  return res.data;\n};\n\n// Holt die eigene Gruppe\nexport const fetchMyGroup = async (educatorId: string) => {\n  const res = await axios.get(`${API_URL}/educators/${educatorId}/group`, { withCredentials: true });\n  return res.data;\n};\n\n// Holt Nachrichten\nexport const fetchMessages = async (childId?: string, groupId?: string) => {\n  let url = `${API_URL}/messages`;\n  if (childId) url += `/child/${childId}`;\n  else if (groupId) url += `/group/${groupId}`;\n  const res = await axios.get(url, { withCredentials: true });\n  return res.data;\n};\n\n// Sendet eine Nachricht\nexport const sendMessage = async (data: { content?: string; childId?: string; groupId?: string; file?: File }) => {\n  const formData = new FormData();\n  if (data.content) formData.append('content', data.content);\n  if (data.childId) formData.append('childId', data.childId);\n  if (data.groupId) formData.append('groupId', data.groupId);\n  if (data.file) formData.append('file', data.file);\n  const res = await axios.post(`${API_URL}/message`, formData, {\n    headers: { 'Content-Type': 'multipart/form-data', withCredentials: true },\n  });\n  return res.data;\n};\n\n/**\n * Notizen eines Kindes abrufen\n * @param {string} childId\n * @returns {Promise<any[]>}\n */\nexport async function fetchChildrenNotes(childId: string): Promise<any[]> {\n  const res = await fetch(`${API_URL}/notes/child/${childId}`, {\n    credentials: 'include',\n  });\n  if (!res.ok) throw new Error('Fehler beim Laden der Notizen');\n  return res.json();\n}\n\n/**\n * Neue Notiz für ein Kind anlegen\n * @param {string} childId\n * @param {string} content\n * @param {File | null} [file]\n * @returns {Promise<any>}\n */\nexport async function addNote(childId: string, content: string, file?: File | null): Promise<any> {\n  const formData = new FormData();\n  formData.append('childId', childId);\n  formData.append('content', content);\n  if (file) formData.append('file', file);\n  const res = await fetch(`${API_URL}/notes`, {\n    method: 'POST',\n    credentials: 'include',\n    body: formData,\n  });\n  if (!res.ok) throw new Error('Fehler beim Speichern der Notiz');\n  return res.json();\n}\n\n// Weitere Erzieher-APIs können hier ergänzt werden ","import React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useUser } from '../../components/UserContext';\nimport { fetchTodaysChildren, fetchPendingCheckins } from '../../services/educatorApi';\nimport { Card, Headline, AnimatedMascotsLoader, ErrorMsg, Button } from '../../components/ui/AdminDashboardUI';\nimport { useNavigate } from 'react-router-dom';\nimport Header from '../../components/Header';\n\nconst Dashboard: React.FC = () => {\n  const { benutzer } = useUser();\n  const [children, setChildren] = useState<any[]>([]);\n  const [pending, setPending] = useState<any[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (benutzer?.role !== 'EDUCATOR') return;\n    setLoading(true);\n    Promise.all([\n      fetchTodaysChildren(benutzer.id),\n      fetchPendingCheckins(benutzer.id)\n    ])\n      .then(([children, pending]) => {\n        setChildren(children);\n        setPending(pending);\n      })\n      .catch(() => setError('Fehler beim Laden der Daten.'))\n      .finally(() => setLoading(false));\n  }, [benutzer]);\n\n  if (benutzer?.role !== 'EDUCATOR') return <ErrorMsg>Zugriff verweigert</ErrorMsg>;\n  if (loading) return <AnimatedMascotsLoader text=\"Lade Übersicht...\" />;\n  if (error) return <ErrorMsg>{error}</ErrorMsg>;\n\n  return (\n    <>\n      <Header title=\"Mein Tag\" />\n      <div style={{marginTop: 64}}>\n        <h2>Heutige Kinder</h2>\n        <ul>\n          {children.map(child => (\n            <Card key={child.id}>{child.name}</Card>\n          ))}\n        </ul>\n        <h2>Offene Check-ins</h2>\n        <ul>\n          {pending.map(item => (\n            <Card key={item.id}>{item.childName}</Card>\n          ))}\n        </ul>\n        <Button onClick={() => navigate('/educator/Notizen')}>Zu Notizen</Button>\n        <Button onClick={() => navigate('/educator/Nachrichten')}>Zu Nachrichten</Button>\n      </div>\n    </>\n  );\n};\n\nexport default Dashboard; "],"names":["API_URL","fetchTodaysChildren","async","axios","get","concat","groupId","withCredentials","data","fetchPendingCheckins","fetchAssignedChildren","educatorId","fetchMyGroup","fetchMessages","childId","url","sendMessage","formData","FormData","content","append","file","post","headers","fetchChildrenNotes","res","fetch","credentials","ok","Error","json","addNote","method","body","Dashboard","benutzer","useUser","children","setChildren","useState","pending","setPending","loading","setLoading","error","setError","navigate","useNavigate","useEffect","role","Promise","all","id","then","_ref","catch","finally","_jsx","ErrorMsg","AnimatedMascotsLoader","text","_jsxs","_Fragment","Header","title","style","marginTop","map","child","Card","name","item","childName","Button","onClick"],"sourceRoot":""}