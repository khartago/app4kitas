"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[384],{5384:(t,a,e)=>{e.r(a),e.d(a,{default:()=>f});var n,c,r,s,i,o=e(7528),d=e(5043),l=e(5464),h=e(4255),p=e(8845),u=e(7717),w=e(5974),x=e(579);const g=l.Ay.div(n||(n=(0,o.A)(["\n  max-width: 900px;\n  margin: 0 auto;\n  padding: 32px 0;\n"]))),y=l.Ay.div(c||(c=(0,o.A)(["\n  display: flex;\n  gap: 12px;\n  margin-bottom: 16px;\n"]))),m=l.Ay.div(r||(r=(0,o.A)(["\n  text-align: center;\n  margin: 48px 0;\n"]))),A=l.Ay.div(s||(s=(0,o.A)(["\n  display: flex;\n  gap: 16px;\n  margin-bottom: 16px;\n"]))),j=l.Ay.select(i||(i=(0,o.A)(["\n  padding: 8px 12px;\n  border-radius: 8px;\n  border: 1px solid #ccc;\n  font-size: 16px;\n"]))),f=()=>{const[t,a]=(0,d.useState)(()=>(new Date).toISOString().slice(0,7)),[e,n]=(0,d.useState)(""),[c,r]=(0,d.useState)([]),[s,i]=(0,d.useState)([]),[o,l]=(0,d.useState)(!1),[f,C]=(0,d.useState)(null);return(0,d.useEffect)(()=>{(0,w.pl)().then(t=>r(t.groups||t))},[]),(0,d.useEffect)(()=>{l(!0),C(null),(0,u.Qs)(t,e).then(t=>i(t.report)).catch(()=>C("Fehler beim Laden des Berichts")).finally(()=>l(!1))},[t,e]),(0,x.jsxs)(g,{children:[(0,x.jsx)(p.$j,{children:"Monatsbericht"}),(0,x.jsx)(y,{children:(0,x.jsx)(p.$n,{onClick:()=>(0,u.CF)(t,e),children:"Als CSV exportieren"})}),(0,x.jsxs)(A,{children:[(0,x.jsx)("input",{type:"month",value:t,onChange:t=>a(t.target.value)}),(0,x.jsxs)(j,{value:e,onChange:t=>n(t.target.value),children:[(0,x.jsx)("option",{value:"",children:"Alle Gruppen"}),c.map(t=>(0,x.jsx)("option",{value:t.id,children:t.name},t.id))]})]}),o?(0,x.jsx)("div",{children:"L\xe4dt..."}):f?(0,x.jsx)("div",{style:{color:"red"},children:f}):0===s.length?(0,x.jsxs)(m,{children:[(0,x.jsx)(h.A,{size:80,mood:"help"}),(0,x.jsx)("div",{children:"Keine Berichtsdaten gefunden."})]}):(0,x.jsxs)("table",{style:{width:"100%",marginTop:24},children:[(0,x.jsx)("thead",{children:(0,x.jsxs)("tr",{children:[(0,x.jsx)("th",{children:"Name"}),(0,x.jsx)("th",{children:"Anwesenheitstage"})]})}),(0,x.jsx)("tbody",{children:s.map(t=>(0,x.jsxs)("tr",{children:[(0,x.jsx)("td",{children:t.name}),(0,x.jsx)("td",{children:t.checkInDays})]},t.childId))})]})]})}},5974:(t,a,e)=>{e.d(a,{$:()=>i,$r:()=>y,Bx:()=>u,EZ:()=>x,F4:()=>w,Iw:()=>p,N6:()=>h,RN:()=>j,UR:()=>m,Zr:()=>A,dE:()=>r,kC:()=>o,oS:()=>l,pl:()=>s,qU:()=>g,st:()=>d});var n=e(9722);const c="/api",r=async()=>(await n.A.get("".concat(c,"/admin/stats"),{withCredentials:!0})).data,s=async()=>(await n.A.get("".concat(c,"/groups"),{withCredentials:!0})).data,i=async t=>(await n.A.post("".concat(c,"/groups"),t,{withCredentials:!0})).data,o=async(t,a)=>(await n.A.put("".concat(c,"/groups/").concat(t,"/educators"),{educatorIds:a},{withCredentials:!0})).data,d=async()=>(await n.A.get("".concat(c,"/children"),{withCredentials:!0})).data,l=async t=>(await n.A.post("".concat(c,"/children"),t,{withCredentials:!0})).data,h=async(t,a)=>(await n.A.put("".concat(c,"/children/").concat(t),a,{withCredentials:!0})).data,p=async(t,a)=>{const e=new FormData;e.append("photo",a);return(await n.A.put("".concat(c,"/children/").concat(t,"/photo"),e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}})).data},u=async()=>(await n.A.get("".concat(c,"/educators"),{withCredentials:!0})).data,w=async()=>(await n.A.get("".concat(c,"/checkin/stats"),{withCredentials:!0})).data,x=async t=>(await n.A.delete("".concat(c,"/children/").concat(t),{withCredentials:!0})).data,g=t=>{window.open("".concat(c,"/children/export?format=").concat(t),"_blank")},y=async t=>(await n.A.post("".concat(c,"/educators"),t,{withCredentials:!0})).data,m=async(t,a)=>(await n.A.put("".concat(c,"/educators/").concat(t),a,{withCredentials:!0})).data,A=async t=>(await n.A.delete("".concat(c,"/educators/").concat(t),{withCredentials:!0})).data,j=t=>{window.open("".concat(c,"/educators/export?format=").concat(t),"_blank")}},7717:(t,a,e)=>{async function n(t,a){const e=new URLSearchParams({date:t});a&&e.append("groupId",a);const n=await fetch("/api/reports/daily?".concat(e.toString()));if(!n.ok)throw new Error("Fehler beim Laden des Tagesberichts");return n.json()}function c(t,a){const e=new URLSearchParams({date:t,format:"csv"});a&&e.append("groupId",a),window.open("/api/reports/daily/export?".concat(e.toString()))}async function r(t,a){const e=new URLSearchParams({month:t});a&&e.append("groupId",a);const n=await fetch("/api/reports/monthly?".concat(e.toString()));if(!n.ok)throw new Error("Fehler beim Laden des Monatsberichts");return n.json()}function s(t,a){const e=new URLSearchParams({month:t,format:"csv"});a&&e.append("groupId",a),window.open("/api/reports/monthly/export?".concat(e.toString()))}e.d(a,{CF:()=>s,Ct:()=>c,Qs:()=>r,yH:()=>n})}}]);
//# sourceMappingURL=384.a4e65f4b.chunk.js.map