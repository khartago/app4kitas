"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[796],{2045:(e,n,t)=>{t.d(n,{$r:()=>u,Bp:()=>h,Bx:()=>s,Dx:()=>x,M6:()=>b,O6:()=>f,UR:()=>p,Uh:()=>o,Zr:()=>m,cM:()=>y,gv:()=>i,p2:()=>w,u_:()=>d,yS:()=>g,zC:()=>c});var r=t(9379);const a="/api";async function i(){const e=await fetch("".concat(a,"/users?role=ADMIN"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fehler beim Laden der Institutionen (Admins)");return e.json()}async function s(){const e=await fetch("".concat(a,"/users?role=EDUCATOR"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fehler beim Laden der Erzieher");return e.json()}async function o(){const e=await fetch("".concat(a,"/users?role=PARENT"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fehler beim Laden der Eltern");return e.json()}async function c(e){const n=await fetch("".concat(a,"/institutionen"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw new Error("Fehler beim Anlegen der Institution");return n.json()}async function l(){const e=await fetch("".concat(a,"/stats"),{credentials:"include"});if(!e.ok)throw new Error("Fehler beim Laden der Statistiken");return e.json()}const d=l,h=l;async function u(e){const n=await fetch("".concat(a,"/users"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)((0,r.A)({},e),{},{role:"EDUCATOR"}))});if(!n.ok)throw new Error("Fehler beim Anlegen des Erziehers");return n.json()}async function p(e,n){const t=await fetch("".concat(a,"/users/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Fehler beim Bearbeiten des Erziehers");return t.json()}async function m(e){const n=await fetch("".concat(a,"/users/").concat(e),{method:"DELETE",credentials:"include"});if(!n.ok)throw new Error("Fehler beim L\xf6schen des Erziehers");return n.json()}async function f(e){const n=await fetch("".concat(a,"/users"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify((0,r.A)((0,r.A)({},e),{},{role:"PARENT"}))});if(!n.ok)throw new Error("Fehler beim Anlegen des Elternteils");return n.json()}async function w(e,n){const t=await fetch("".concat(a,"/users/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Fehler beim Bearbeiten des Elternteils");return t.json()}async function y(e){const n=await fetch("".concat(a,"/users/").concat(e),{method:"DELETE",credentials:"include"});if(!n.ok)throw new Error("Fehler beim L\xf6schen des Elternteils");return n.json()}async function b(e,n){const t=await fetch("".concat(a,"/institutionen/").concat(e),{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!t.ok)throw new Error("Fehler beim Bearbeiten der Institution");return t.json()}async function x(e){const n=await fetch("".concat(a,"/institutionen/").concat(e),{method:"DELETE",credentials:"include"});if(!n.ok)throw new Error("Fehler beim L\xf6schen der Institution");return n.json()}async function g(){const e=await fetch("".concat(a,"/institutionen"),{credentials:"include",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Fehler beim Laden der Institutionen");return e.json()}},9796:(e,n,t)=>{t.r(n),t.d(n,{default:()=>w});var r,a=t(9379),i=t(7528),s=t(5043),o=t(8223),c=t(2045),l=t(8845),d=t(1924),h=t(1146),u=t(5464),p=t(2774),m=t(579);const f=u.Ay.button(r||(r=(0,i.A)(["\n  background: ",";\n  color: #212121;\n  font-size: 17px;\n  font-weight: 700;\n  padding: 12px 28px;\n  border-radius: 14px;\n  box-shadow: 0 2px 10px rgba(255,193,7,0.10);\n  border: none;\n  margin-left: 0;\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  cursor: pointer;\n  transition: background 0.18s, box-shadow 0.18s, transform 0.18s, opacity 0.18s;\n  opacity: 0.97;\n  will-change: transform, opacity;\n  &:hover {\n    background: ",";\n    color: #fff;\n    transform: scale(1.045);\n    opacity: 1;\n    box-shadow: 0 8px 32px rgba(76,175,80,0.16);\n  }\n  @media (max-width: 700px) {\n    width: 100%;\n    margin-top: 10px;\n    justify-content: center;\n    font-size: 16px;\n    padding: 12px 0;\n  }\n"])),e=>{let{theme:n}=e;return n.colors.accent},e=>{let{theme:n}=e;return n.colors.primary}),w=()=>{const{benutzer:e}=(0,o.J)(),[n,t]=(0,s.useState)([]),[r,i]=(0,s.useState)(!0),[u,w]=(0,s.useState)(null),[y,b]=(0,s.useState)(""),[x,g]=(0,s.useState)(!1),[j,E]=(0,s.useState)({name:"",email:"",password:""}),[k,A]=(0,s.useState)(null),[S,C]=(0,s.useState)(0),[F,T]=(0,s.useState)(10),v=async()=>{i(!0),w(null);try{const e=await(0,c.Uh)();t(e)}catch(e){w(e.message||"Fehler beim Laden der Eltern.")}i(!1)};(0,s.useEffect)(()=>{"SUPER_ADMIN"===(null===e||void 0===e?void 0:e.role)&&v()},[e]);if("SUPER_ADMIN"!==(null===e||void 0===e?void 0:e.role))return(0,m.jsx)(l.IW,{children:"Zugriff verweigert"});if(r)return(0,m.jsx)(l.BZ,{text:"Lade Eltern..."});if(u)return(0,m.jsx)(l.IW,{children:u});return(0,m.jsxs)("main",{style:{maxWidth:1100,margin:"0 auto",padding:"32px 0 0 0",display:"flex",flexDirection:"column",alignItems:"stretch"},children:[(0,m.jsx)(d.A,{title:"Eltern-\xdcbersicht"}),(0,m.jsxs)(l.Lj,{children:[(0,m.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:0,marginBottom:18},children:[(0,m.jsx)("span",{style:{fontSize:"1.25em",fontWeight:700,color:"#4CAF50",marginBottom:8},children:"Eltern"}),(0,m.jsxs)(l.VI,{children:[(0,m.jsx)(l.sw,{style:{flex:1,width:"100%"},children:(0,m.jsx)(l.VV,{type:"text",placeholder:"Suchen...",value:y,onChange:e=>b(e.target.value),"aria-label":"Suchen"})}),(0,m.jsxs)(f,{onClick:()=>{g(!0),A(null)},children:[(0,m.jsx)(p.OiG,{})," Hinzuf\xfcgen"]})]})]}),(0,m.jsx)(l.bQ,{data:n,columns:[{key:"name",label:"Name",editable:!0,filterable:!0,sortable:!0},{key:"email",label:"E-Mail",editable:!0,filterable:!0,sortable:!0},{key:"password",label:"Passwort (neu setzen)",editable:!0},{key:"id",label:"Eltern-ID",editable:!1,filterable:!0,sortable:!0}],onEdit:async e=>{i(!0);try{await(0,c.p2)(e.id,{name:e.name,email:e.email,password:e.password||void 0}),await v()}catch(n){w(n.message||"Fehler beim Bearbeiten.")}i(!1)},onDelete:async e=>{i(!0);try{await(0,c.cM)(e.id),await v()}catch(n){w(n.message||"Fehler beim L\xf6schen.")}i(!1)},entityName:"Eltern",search:y,page:S,rowsPerPage:F,onPageChange:C,onRowsPerPageChange:e=>{T(e),C(0)},totalCount:n.length})]}),(0,m.jsxs)(h.Ay,{open:x,onClose:()=>{g(!1),A(null)},title:"Elternteil hinzuf\xfcgen",children:[k&&(0,m.jsx)(h.yn,{children:k}),(0,m.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(async()=>{if(j.name&&j.email&&j.password){i(!0),A(null);try{await(0,c.O6)({name:j.name,email:j.email,password:j.password}),g(!1),E({name:"",email:"",password:""}),await v()}catch(e){A(e.message||"Fehler beim Hinzuf\xfcgen.")}i(!1)}else A("Name, E-Mail und Passwort sind erforderlich.")})()},children:[(0,m.jsxs)(h.zB,{children:[(0,m.jsx)(h.JU,{htmlFor:"parent-name",children:"Name"}),(0,m.jsx)(h.pd,{id:"parent-name",value:j.name,onChange:e=>E(n=>(0,a.A)((0,a.A)({},n),{},{name:e.target.value})),autoFocus:!0,required:!0})]}),(0,m.jsxs)(h.zB,{children:[(0,m.jsx)(h.JU,{htmlFor:"parent-email",children:"E-Mail"}),(0,m.jsx)(h.pd,{id:"parent-email",type:"email",value:j.email,onChange:e=>E(n=>(0,a.A)((0,a.A)({},n),{},{email:e.target.value})),required:!0})]}),(0,m.jsxs)(h.zB,{children:[(0,m.jsx)(h.JU,{htmlFor:"parent-password",children:"Passwort"}),(0,m.jsx)(h.pd,{id:"parent-password",type:"password",value:j.password,onChange:e=>E(n=>(0,a.A)((0,a.A)({},n),{},{password:e.target.value})),required:!0})]}),(0,m.jsx)(h.yl,{type:"submit",children:"Hinzuf\xfcgen"})]})]})]})}}}]);
//# sourceMappingURL=796.27e5368a.chunk.js.map